# Harbor values for official goharbor chart on node5 (AMD64)
# Chart: harbor/harbor v1.18.1
# App: Harbor v2.14.1

externalURL: https://harbor.mrcontainer.nl

# Use ClusterIP with custom ingress (managed separately via cert-manager)
expose:
  type: clusterIP
  tls:
    enabled: false  # TLS termination handled by Traefik ingress
  clusterIP:
    name: harbor
    ports:
      httpPort: 80
      httpsPort: 443

# Persistence using Longhorn
persistence:
  enabled: true
  resourcePolicy: "keep"
  persistentVolumeClaim:
    registry:
      storageClass: "longhorn"
      size: 10Gi
    jobservice:
      jobLog:
        storageClass: "longhorn"
        size: 1Gi

# All components scheduled on node5 (AMD64)
portal:
  nodeSelector:
    kubernetes.io/hostname: node5

core:
  nodeSelector:
    kubernetes.io/hostname: node5

jobservice:
  nodeSelector:
    kubernetes.io/hostname: node5

registry:
  nodeSelector:
    kubernetes.io/hostname: node5

trivy:
  enabled: true
  nodeSelector:
    kubernetes.io/hostname: node5

exporter:
  nodeSelector:
    kubernetes.io/hostname: node5

nginx:
  nodeSelector:
    kubernetes.io/hostname: node5

# Internal database on node5
database:
  type: internal
  internal:
    nodeSelector:
      kubernetes.io/hostname: node5
    password: "changeit"  # TODO: Use external-secrets

# Internal Redis on node5
redis:
  type: internal
  internal:
    nodeSelector:
      kubernetes.io/hostname: node5
